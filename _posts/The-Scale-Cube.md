# The Scale Cube

原文链接: http://microservices.io/articles/scalecube.html

《可扩展的艺术》描述了一个非常有用的三维可扩展性模型：扩展立方体。

![The Scale Cube](/images/TheScaleCube.jpg)

在此模型中，通过在负载均衡器后面运行副本来扩展应用程序称为X轴扩展。另外两种扩展是Y轴扩展和Z轴扩展。微服务架构是Y轴扩展的应用，但我们也看看X轴和Z轴扩展。


## X扩展

X扩展包含在负载平衡器后面运行应用程序的多个副本。如果有N个副本，那么每个副本处理负载的1 / N。这是扩展应用程序的一个简单的常用方法。

这种方法的一个缺点是，因为每个副本都可能访问所有的数据，所以**缓存**需要更多的内存才能生效。这种方法的另一个问题是它没有解决增加**开发和应用复杂性的问题**。

## Y扩展

与由应用程序运行多个相同副本组成的X轴和Z轴不同，Y轴扩展将应用程序分成多个不同的服务。每个服务都负责一个或多个密切相关的功能。有几种将应用程序**分解**成服务的方法。一种方法是使用基于动词的分解和定义实现单个用例（如结帐）的服务。另一种选择是通过名词来分解应用程序，并创建与特定实体相关的所有操作（例如客户管理）的服务。应用程序可能会使用基于动词和基于名词的分解的组合。

## Z扩展

当使用Z轴扩展时，每个服务器运行相同的代码副本。在这方面，它与X轴扩展相似。最大的区别是每个服务器只负责一**部分数据**。系统的某些组件负责将每个请求**路由**到相应的服务器。一个常用的路由标准是请求的**一个属性**，例如被访问实体的主键。另一个常见的路由标准是**客户类型**。例如，通过将请求路由到具有更多容量的不同服务器组，应用程序可以为付费客户提供比免费客户更高的SLA(服务级别协议也称服务等级协议)。

Z轴分割通常用于扩展数据库。数据根据每条记录的属性在一组服务器上进行分区（也称为分片）。在此示例中，RESTAURANT表的主键用于在两个不同的数据库服务器之间对行进行分区。请注意，通过将一台或多台服务器部署为副本/从服务器，可能会将X轴克隆应用于每个分区。 Z轴扩展也可以应用于应用程序。在这个例子中，搜索服务由多个分区组成。路由器将每个内容项目发送到适当的分区，在那里对它进行索引和存储。查询聚合器将每个查询发送到所有分区，并合并来自每个分区的结果。

Z轴扩展有许多好处。

* 每个服务器只处理数据的一个子集。
* 这可以提高缓存利用率并减少内存使用量和I/O流量。
* 它还提高了事务可伸缩性，因为请求通常分布在多个服务器上。
* 而且，Z轴扩展可以改善故障隔离，因为故障只能使部分数据可访问。

Z轴扩展有一些缺点。

* 一个缺点是应用程序复杂性增加。
* 我们需要实施一个分区方案，如果我们需要对数据进行重新分区的话，这可能会非常棘手。
* Z轴扩展的另一个缺点是不能解决增加开发和应用复杂性的问题。为了解决这些问题，我们需要应用Y轴扩展。